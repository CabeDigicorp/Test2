/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/loaders/ImageBitmapLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Cache}from"./Cache.js";import{Loader}from"./Loader.js";class ImageBitmapLoader extends Loader{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,a,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,r=Cache.get(e);if(void 0!==r)return o.manager.itemStart(e),r.then?void r.then((a=>{t&&t(a),o.manager.itemEnd(e)})).catch((e=>{n&&n(e)})):(setTimeout((function(){t&&t(r),o.manager.itemEnd(e)}),0),r);const i={};i.credentials="anonymous"===this.crossOrigin?"same-origin":"include",i.headers=this.requestHeader;const s=fetch(e,i).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(a){return Cache.add(e,a),t&&t(a),o.manager.itemEnd(e),a})).catch((function(t){n&&n(t),Cache.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)}));Cache.add(e,s),o.manager.itemStart(e)}}export{ImageBitmapLoader};
//# sourceMappingURL=/sm/04a467373aa706d103366b7df232ccb37dfbf539b9d510bd7d4de9cfdcf8a13a.map