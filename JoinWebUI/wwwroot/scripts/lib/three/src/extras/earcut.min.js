/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/extras/Earcut.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const Earcut={triangulate:function(e,n,t=2){const r=n&&n.length,i=r?n[0]*t:e.length;let x=linkedList(e,0,i,t,!0);const o=[];if(!x||x.next===x.prev)return o;let l,a,s,u,c,f,p;if(r&&(x=eliminateHoles(e,n,x,t)),e.length>80*t){l=s=e[0],a=u=e[1];for(let n=t;n<i;n+=t)c=e[n],f=e[n+1],c<l&&(l=c),f<a&&(a=f),c>s&&(s=c),f>u&&(u=f);p=Math.max(s-l,u-a),p=0!==p?32767/p:0}return earcutLinked(x,o,t,l,a,p,0),o}};function linkedList(e,n,t,r,i){let x,o;if(i===signedArea(e,n,t,r)>0)for(x=n;x<t;x+=r)o=insertNode(x,e[x],e[x+1],o);else for(x=t-r;x>=n;x-=r)o=insertNode(x,e[x],e[x+1],o);return o&&equals(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(e,n){if(!e)return e;n||(n=e);let t,r=e;do{if(t=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),r=n=r.prev,r===r.next)break;t=!0}}while(t||r!==n);return n}function earcutLinked(e,n,t,r,i,x,o){if(!e)return;!o&&x&&indexCurve(e,r,i,x);let l,a,s=e;for(;e.prev!==e.next;)if(l=e.prev,a=e.next,x?isEarHashed(e,r,i,x):isEar(e))n.push(l.i/t|0),n.push(e.i/t|0),n.push(a.i/t|0),removeNode(e),e=a.next,s=a.next;else if((e=a)===s){o?1===o?earcutLinked(e=cureLocalIntersections(filterPoints(e),n,t),n,t,r,i,x,2):2===o&&splitEarcut(e,n,t,r,i,x):earcutLinked(filterPoints(e),n,t,r,i,x,1);break}}function isEar(e){const n=e.prev,t=e,r=e.next;if(area(n,t,r)>=0)return!1;const i=n.x,x=t.x,o=r.x,l=n.y,a=t.y,s=r.y,u=i<x?i<o?i:o:x<o?x:o,c=l<a?l<s?l:s:a<s?a:s,f=i>x?i>o?i:o:x>o?x:o,p=l>a?l>s?l:s:a>s?a:s;let y=r.next;for(;y!==n;){if(y.x>=u&&y.x<=f&&y.y>=c&&y.y<=p&&pointInTriangle(i,l,x,a,o,s,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function isEarHashed(e,n,t,r){const i=e.prev,x=e,o=e.next;if(area(i,x,o)>=0)return!1;const l=i.x,a=x.x,s=o.x,u=i.y,c=x.y,f=o.y,p=l<a?l<s?l:s:a<s?a:s,y=u<c?u<f?u:f:c<f?c:f,d=l>a?l>s?l:s:a>s?a:s,v=u>c?u>f?u:f:c>f?c:f,h=zOrder(p,y,n,t,r),g=zOrder(d,v,n,t,r);let Z=e.prevZ,m=e.nextZ;for(;Z&&Z.z>=h&&m&&m.z<=g;){if(Z.x>=p&&Z.x<=d&&Z.y>=y&&Z.y<=v&&Z!==i&&Z!==o&&pointInTriangle(l,u,a,c,s,f,Z.x,Z.y)&&area(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=p&&m.x<=d&&m.y>=y&&m.y<=v&&m!==i&&m!==o&&pointInTriangle(l,u,a,c,s,f,m.x,m.y)&&area(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=h;){if(Z.x>=p&&Z.x<=d&&Z.y>=y&&Z.y<=v&&Z!==i&&Z!==o&&pointInTriangle(l,u,a,c,s,f,Z.x,Z.y)&&area(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=g;){if(m.x>=p&&m.x<=d&&m.y>=y&&m.y<=v&&m!==i&&m!==o&&pointInTriangle(l,u,a,c,s,f,m.x,m.y)&&area(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function cureLocalIntersections(e,n,t){let r=e;do{const i=r.prev,x=r.next.next;!equals(i,x)&&intersects(i,r,r.next,x)&&locallyInside(i,x)&&locallyInside(x,i)&&(n.push(i.i/t|0),n.push(r.i/t|0),n.push(x.i/t|0),removeNode(r),removeNode(r.next),r=e=x),r=r.next}while(r!==e);return filterPoints(r)}function splitEarcut(e,n,t,r,i,x){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&isValidDiagonal(o,e)){let l=splitPolygon(o,e);return o=filterPoints(o,o.next),l=filterPoints(l,l.next),earcutLinked(o,n,t,r,i,x,0),void earcutLinked(l,n,t,r,i,x,0)}e=e.next}o=o.next}while(o!==e)}function eliminateHoles(e,n,t,r){const i=[];let x,o,l,a,s;for(x=0,o=n.length;x<o;x++)l=n[x]*r,a=x<o-1?n[x+1]*r:e.length,s=linkedList(e,l,a,r,!1),s===s.next&&(s.steiner=!0),i.push(getLeftmost(s));for(i.sort(compareX),x=0;x<i.length;x++)t=eliminateHole(i[x],t);return t}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){const t=findHoleBridge(e,n);if(!t)return n;const r=splitPolygon(t,e);return filterPoints(r,r.next),filterPoints(t,t.next)}function findHoleBridge(e,n){let t,r=n,i=-1/0;const x=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=x&&e>i&&(i=e,t=r.x<r.next.x?r:r.next,e===x))return t}r=r.next}while(r!==n);if(!t)return null;const l=t,a=t.x,s=t.y;let u,c=1/0;r=t;do{x>=r.x&&r.x>=a&&x!==r.x&&pointInTriangle(o<s?x:i,o,a,s,o<s?i:x,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(x-r.x),locallyInside(r,e)&&(u<c||u===c&&(r.x>t.x||r.x===t.x&&sectorContainsSector(t,r)))&&(t=r,c=u)),r=r.next}while(r!==l);return t}function sectorContainsSector(e,n){return area(e.prev,e,n.prev)<0&&area(n.next,e,e.next)<0}function indexCurve(e,n,t,r){let i=e;do{0===i.z&&(i.z=zOrder(i.x,i.y,n,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){let n,t,r,i,x,o,l,a,s=1;do{for(t=e,e=null,x=null,o=0;t;){for(o++,r=t,l=0,n=0;n<s&&(l++,r=r.nextZ,r);n++);for(a=s;l>0||a>0&&r;)0!==l&&(0===a||!r||t.z<=r.z)?(i=t,t=t.nextZ,l--):(i=r,r=r.nextZ,a--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;t=r}x.nextZ=null,s*=2}while(o>1);return e}function zOrder(e,n,t,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-t)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*i|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function getLeftmost(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function pointInTriangle(e,n,t,r,i,x,o,l){return(i-o)*(n-l)>=(e-o)*(x-l)&&(e-o)*(r-l)>=(t-o)*(n-l)&&(t-o)*(x-l)>=(i-o)*(r-l)}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&(locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)&&(area(e.prev,e,n.prev)||area(e,n.prev,n))||equals(e,n)&&area(e.prev,e,e.next)>0&&area(n.prev,n,n.next)>0)}function area(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,t,r){const i=sign(area(e,n,t)),x=sign(area(e,n,r)),o=sign(area(t,r,e)),l=sign(area(t,r,n));return i!==x&&o!==l||(!(0!==i||!onSegment(e,t,n))||(!(0!==x||!onSegment(e,r,n))||(!(0!==o||!onSegment(t,e,r))||!(0!==l||!onSegment(t,n,r)))))}function onSegment(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function sign(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,n){let t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&intersects(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){let t=e,r=!1;const i=(e.x+n.x)/2,x=(e.y+n.y)/2;do{t.y>x!=t.next.y>x&&t.next.y!==t.y&&i<(t.next.x-t.x)*(x-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function splitPolygon(e,n){const t=new Node(e.i,e.x,e.y),r=new Node(n.i,n.x,n.y),i=e.next,x=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,r.next=t,t.prev=r,x.next=r,r.prev=x,r}function insertNode(e,n,t,r){const i=new Node(e,n,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,t,r){let i=0;for(let x=n,o=t-r;x<t;x+=r)i+=(e[o]-e[x])*(e[x+1]+e[o+1]),o=x;return i}export{Earcut};
//# sourceMappingURL=/sm/73574782c7a437a5f0bc6c54efb392a2b229ae6bab6fbbca7ca06e46a1559e7a.map