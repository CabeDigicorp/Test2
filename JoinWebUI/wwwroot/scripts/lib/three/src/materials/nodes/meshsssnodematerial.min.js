/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/materials/nodes/MeshSSSNodeMaterial.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import MeshPhysicalNodeMaterial from"./MeshPhysicalNodeMaterial.js";import PhysicalLightingModel from"../../nodes/functions/PhysicalLightingModel.js";import{transformedNormalView}from"../../nodes/accessors/Normal.js";import{positionViewDirection}from"../../nodes/accessors/Position.js";import{float,vec3}from"../../nodes/tsl/TSLBase.js";class SSSLightingModel extends PhysicalLightingModel{constructor(e,t,s,i){super(e,t,s),this.useSSS=i}direct({lightDirection:e,lightColor:t,reflectedLight:s},i,o){if(!0===this.useSSS){const i=o.material,{thicknessColorNode:n,thicknessDistortionNode:r,thicknessAmbientNode:h,thicknessAttenuationNode:c,thicknessPowerNode:l,thicknessScaleNode:d}=i,a=e.add(transformedNormalView.mul(r)).normalize(),N=float(positionViewDirection.dot(a.negate()).saturate().pow(l).mul(d)),u=vec3(N.add(h).mul(n));s.directDiffuse.addAssign(u.mul(c.mul(t)))}super.direct({lightDirection:e,lightColor:t,reflectedLight:s},i,o)}}class MeshSSSNodeMaterial extends MeshPhysicalNodeMaterial{static get type(){return"MeshSSSNodeMaterial"}constructor(e){super(e),this.thicknessColorNode=null,this.thicknessDistortionNode=float(.1),this.thicknessAmbientNode=float(0),this.thicknessAttenuationNode=float(.1),this.thicknessPowerNode=float(2),this.thicknessScaleNode=float(10)}get useSSS(){return null!==this.thicknessColorNode}setupLightingModel(){return new SSSLightingModel(this.useClearcoat,this.useSheen,this.useIridescence,this.useSSS)}copy(e){return this.thicknessColorNode=e.thicknessColorNode,this.thicknessDistortionNode=e.thicknessDistortionNode,this.thicknessAmbientNode=e.thicknessAmbientNode,this.thicknessAttenuationNode=e.thicknessAttenuationNode,this.thicknessPowerNode=e.thicknessPowerNode,this.thicknessScaleNode=e.thicknessScaleNode,super.copy(e)}}export default MeshSSSNodeMaterial;
//# sourceMappingURL=/sm/9ec99991262ba2cda7b27ef49d570a49289e67356c0b218a883ec4f1b13099a5.map