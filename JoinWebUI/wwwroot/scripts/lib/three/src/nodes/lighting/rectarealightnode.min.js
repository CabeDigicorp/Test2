/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/lighting/RectAreaLightNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import AnalyticLightNode from"./AnalyticLightNode.js";import{texture}from"../accessors/TextureNode.js";import{uniform}from"../core/UniformNode.js";import{lightViewPosition}from"../accessors/Lights.js";import{renderGroup}from"../core/UniformGroupNode.js";import{Matrix4}from"../../math/Matrix4.js";import{Vector3}from"../../math/Vector3.js";import{NodeUpdateType}from"../core/constants.js";const _matrix41=new Matrix4,_matrix42=new Matrix4;let ltcLib=null;class RectAreaLightNode extends AnalyticLightNode{static get type(){return"RectAreaLightNode"}constructor(t=null){super(t),this.halfHeight=uniform(new Vector3).setGroup(renderGroup),this.halfWidth=uniform(new Vector3).setGroup(renderGroup),this.updateType=NodeUpdateType.RENDER}update(t){super.update(t);const{light:e}=this,i=t.camera.matrixWorldInverse;_matrix42.identity(),_matrix41.copy(e.matrixWorld),_matrix41.premultiply(i),_matrix42.extractRotation(_matrix41),this.halfWidth.value.set(.5*e.width,0,0),this.halfHeight.value.set(0,.5*e.height,0),this.halfWidth.value.applyMatrix4(_matrix42),this.halfHeight.value.applyMatrix4(_matrix42)}setup(t){let e,i;super.setup(t),t.isAvailable("float32Filterable")?(e=texture(ltcLib.LTC_FLOAT_1),i=texture(ltcLib.LTC_FLOAT_2)):(e=texture(ltcLib.LTC_HALF_1),i=texture(ltcLib.LTC_HALF_2));const{colorNode:r,light:o}=this,a=t.context.lightingModel,l=lightViewPosition(o),s=t.context.reflectedLight;a.directRectArea({lightColor:r,lightPosition:l,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:s,ltc_1:e,ltc_2:i},t.stack,t)}static setLTC(t){ltcLib=t}}export default RectAreaLightNode;
//# sourceMappingURL=/sm/268f8bd58e65e63bbda6c661ff54c607c512983e4269185eaa5f45276479b2ec.map