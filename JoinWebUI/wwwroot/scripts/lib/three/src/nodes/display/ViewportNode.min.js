/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.168.0/src/nodes/display/ViewportNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Node,{registerNode}from"../core/Node.js";import{NodeUpdateType}from"../core/constants.js";import{uniform}from"../core/UniformNode.js";import{Fn,nodeImmutable,vec2}from"../tsl/TSLBase.js";import{Vector2}from"../../math/Vector2.js";import{Vector4}from"../../math/Vector4.js";let resolution,viewportResult;class ViewportNode extends Node{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===ViewportNode.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=NodeUpdateType.NONE;return this.scope!==ViewportNode.RESOLUTION&&this.scope!==ViewportNode.VIEWPORT||(e=NodeUpdateType.RENDER),this.updateType=e,e}update({renderer:e}){this.scope===ViewportNode.VIEWPORT?e.getViewport(viewportResult):e.getDrawingBufferSize(resolution)}setup(){const e=this.scope;let o=null;return o=e===ViewportNode.RESOLUTION?uniform(resolution||(resolution=new Vector2)):e===ViewportNode.VIEWPORT?uniform(viewportResult||(viewportResult=new Vector4)):vec2(viewportCoordinate.div(viewportResolution)),o}generate(e){if(this.scope===ViewportNode.COORDINATE){let o=e.getFragCoord();if(e.isFlipY()){const t=e.getNodeProperties(viewportResolution).outputNode.build(e);o=`${e.getType("vec2")}( ${o}.x, ${t}.y - ${o}.y )`}return o}return super.generate(e)}}ViewportNode.COORDINATE="coordinate",ViewportNode.RESOLUTION="resolution",ViewportNode.VIEWPORT="viewport",ViewportNode.UV="uv";export default ViewportNode;ViewportNode.type=registerNode("Viewport",ViewportNode);export const viewportCoordinate=nodeImmutable(ViewportNode,ViewportNode.COORDINATE);export const viewportResolution=nodeImmutable(ViewportNode,ViewportNode.RESOLUTION);export const viewport=nodeImmutable(ViewportNode,ViewportNode.VIEWPORT);export const viewportUV=nodeImmutable(ViewportNode,ViewportNode.UV);export const viewportTopLeft=Fn((()=>(console.warn('TSL.ViewportNode: "viewportTopLeft" is deprecated. Use "viewportUV" instead.'),viewportUV)),"vec2").once()();export const viewportBottomLeft=Fn((()=>(console.warn('TSL.ViewportNode: "viewportBottomLeft" is deprecated. Use "viewportUV.flipY()" instead.'),viewportUV.flipY())),"vec2").once()();
//# sourceMappingURL=/sm/8ddad4510dbac2efa61b4f138c84c41fcda15bc1ebf3cc75fe6ffc00db5bcf0f.map