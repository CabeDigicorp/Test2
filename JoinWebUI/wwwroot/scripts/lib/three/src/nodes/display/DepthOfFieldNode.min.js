/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.169.0/src/nodes/display/DepthOfFieldNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TempNode from"../core/TempNode.js";import{uv}from"../accessors/UV.js";import{Fn,nodeObject,vec2,vec4}from"../tsl/TSLBase.js";import{NodeUpdateType}from"../core/constants.js";import{uniform}from"../core/UniformNode.js";import{clamp}from"../math/MathNode.js";import{convertToTexture}from"../utils/RTTNode.js";class DepthOfFieldNode extends TempNode{static get type(){return"DepthOfFieldNode"}constructor(d,e,u,m,a){super(),this.textureNode=d,this.viewZNode=e,this.focusNode=u,this.apertureNode=m,this.maxblurNode=a,this._aspect=uniform(0),this.updateBeforeType=NodeUpdateType.RENDER}updateBefore(){const d=this.textureNode.value;this._aspect.value=d.image.width/d.image.height}setup(){const d=this.textureNode,e=d.uvNode||uv(),u=e=>d.uv(e);return Fn((()=>{const d=vec2(1,this._aspect),m=this.focusNode.add(this.viewZNode),a=vec2(clamp(m.mul(this.apertureNode),this.maxblurNode.negate(),this.maxblurNode)),l=a.mul(.9),t=a.mul(.7),c=a.mul(.4);let o=vec4(0);return o=o.add(u(e)),o=o.add(u(e.add(vec2(0,.4).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.15,.37).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.29,.29).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.37,.15).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.4,0).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.37,-.15).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.29,-.29).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.15,-.37).mul(d).mul(a)))),o=o.add(u(e.add(vec2(0,-.4).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.15,.37).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.29,.29).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.37,.15).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.4,0).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.37,-.15).mul(d).mul(a)))),o=o.add(u(e.add(vec2(-.29,-.29).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.15,-.37).mul(d).mul(a)))),o=o.add(u(e.add(vec2(.15,.37).mul(d).mul(l)))),o=o.add(u(e.add(vec2(-.37,.15).mul(d).mul(l)))),o=o.add(u(e.add(vec2(.37,-.15).mul(d).mul(l)))),o=o.add(u(e.add(vec2(-.15,-.37).mul(d).mul(l)))),o=o.add(u(e.add(vec2(-.15,.37).mul(d).mul(l)))),o=o.add(u(e.add(vec2(.37,.15).mul(d).mul(l)))),o=o.add(u(e.add(vec2(-.37,-.15).mul(d).mul(l)))),o=o.add(u(e.add(vec2(.15,-.37).mul(d).mul(l)))),o=o.add(u(e.add(vec2(.29,.29).mul(d).mul(t)))),o=o.add(u(e.add(vec2(.4,0).mul(d).mul(t)))),o=o.add(u(e.add(vec2(.29,-.29).mul(d).mul(t)))),o=o.add(u(e.add(vec2(0,-.4).mul(d).mul(t)))),o=o.add(u(e.add(vec2(-.29,.29).mul(d).mul(t)))),o=o.add(u(e.add(vec2(-.4,0).mul(d).mul(t)))),o=o.add(u(e.add(vec2(-.29,-.29).mul(d).mul(t)))),o=o.add(u(e.add(vec2(0,.4).mul(d).mul(t)))),o=o.add(u(e.add(vec2(.29,.29).mul(d).mul(c)))),o=o.add(u(e.add(vec2(.4,0).mul(d).mul(c)))),o=o.add(u(e.add(vec2(.29,-.29).mul(d).mul(c)))),o=o.add(u(e.add(vec2(0,-.4).mul(d).mul(c)))),o=o.add(u(e.add(vec2(-.29,.29).mul(d).mul(c)))),o=o.add(u(e.add(vec2(-.4,0).mul(d).mul(c)))),o=o.add(u(e.add(vec2(-.29,-.29).mul(d).mul(c)))),o=o.add(u(e.add(vec2(0,.4).mul(d).mul(c)))),o=o.div(41),o.a=1,vec4(o)}))()}}export default DepthOfFieldNode;export const dof=(d,e,u=1,m=.025,a=1)=>nodeObject(new DepthOfFieldNode(convertToTexture(d),nodeObject(e),nodeObject(u),nodeObject(m),nodeObject(a)));
//# sourceMappingURL=/sm/13751d845ac4fdbbd0fe5ea259c5f21def245a38007561d30144bce7a365659d.map