/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.169.0/src/nodes/display/StereoCompositePassNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import PassNode from"./PassNode.js";import{StereoCamera}from"../../cameras/StereoCamera.js";import{HalfFloatType,LinearFilter,NearestFilter}from"../../constants.js";import{RenderTarget}from"../../core/RenderTarget.js";import{texture}from"../accessors/TextureNode.js";import{Vector2}from"../../math/Vector2.js";import QuadMesh from"../../renderers/common/QuadMesh.js";const _size=new Vector2,_quadMesh=new QuadMesh;class StereoCompositePassNode extends PassNode{static get type(){return"StereoCompositePassNode"}constructor(e,t){super(PassNode.COLOR,e,t),this.isStereoCompositePassNode=!0,this.stereo=new StereoCamera;const r={minFilter:LinearFilter,magFilter:NearestFilter,type:HalfFloatType};this._renderTargetL=new RenderTarget(1,1,r),this._renderTargetR=new RenderTarget(1,1,r),this._mapLeft=texture(this._renderTargetL.texture),this._mapRight=texture(this._renderTargetR.texture),this._material=null}updateStereoCamera(e){this.stereo.cameraL.coordinateSystem=e,this.stereo.cameraR.coordinateSystem=e,this.stereo.update(this.camera)}setSize(e,t){super.setSize(e,t),this._renderTargetL.setSize(this.renderTarget.width,this.renderTarget.height),this._renderTargetR.setSize(this.renderTarget.width,this.renderTarget.height)}updateBefore(e){const{renderer:t}=e,{scene:r,stereo:s,renderTarget:a}=this;this._pixelRatio=t.getPixelRatio(),this.updateStereoCamera(t.coordinateSystem);const i=t.getSize(_size);this.setSize(i.width,i.height);const o=t.getRenderTarget();t.setRenderTarget(this._renderTargetL),t.render(r,s.cameraL),t.setRenderTarget(this._renderTargetR),t.render(r,s.cameraR),t.setRenderTarget(a),_quadMesh.material=this._material,_quadMesh.render(t),t.setRenderTarget(o)}dispose(){super.dispose(),this._renderTargetL.dispose(),this._renderTargetR.dispose(),null!==this._material&&this._material.dispose()}}export default StereoCompositePassNode;
//# sourceMappingURL=/sm/c44e263566a20ca9c18e79d6cebf8480cd1dc8552c3186ae7707a9c3ed9b882f.map