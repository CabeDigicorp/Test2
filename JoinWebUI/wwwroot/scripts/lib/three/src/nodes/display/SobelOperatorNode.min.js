/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.169.0/src/nodes/display/SobelOperatorNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TempNode from"../core/TempNode.js";import{uv}from"../accessors/UV.js";import{luminance}from"./ColorAdjustment.js";import{Fn,nodeObject,vec2,vec3,vec4,mat3}from"../tsl/TSLBase.js";import{NodeUpdateType}from"../core/constants.js";import{uniform}from"../core/UniformNode.js";import{add}from"../math/OperatorNode.js";import{convertToTexture}from"../utils/RTTNode.js";import{Vector2}from"../../math/Vector2.js";class SobelOperatorNode extends TempNode{static get type(){return"SobelOperatorNode"}constructor(e){super(),this.textureNode=e,this.updateBeforeType=NodeUpdateType.RENDER,this._invSize=uniform(new Vector2)}updateBefore(){const e=this.textureNode.value;this._invSize.value.set(1/e.image.width,1/e.image.height)}setup(){const{textureNode:e}=this,o=e.uvNode||uv(),t=o=>e.uv(o);return Fn((()=>{const e=this._invSize,m=mat3(-1,-2,-1,0,0,0,1,2,1),u=mat3(-1,0,1,-2,0,2,-1,0,1),r=luminance(t(o.add(e.mul(vec2(-1,-1)))).xyz),d=luminance(t(o.add(e.mul(vec2(-1,0)))).xyz),l=luminance(t(o.add(e.mul(vec2(-1,1)))).xyz),a=luminance(t(o.add(e.mul(vec2(0,-1)))).xyz),n=luminance(t(o.add(e.mul(vec2(0,0)))).xyz),c=luminance(t(o.add(e.mul(vec2(0,1)))).xyz),i=luminance(t(o.add(e.mul(vec2(1,-1)))).xyz),s=luminance(t(o.add(e.mul(vec2(1,0)))).xyz),p=luminance(t(o.add(e.mul(vec2(1,1)))).xyz),v=add(m[0][0].mul(r),m[1][0].mul(a),m[2][0].mul(i),m[0][1].mul(d),m[1][1].mul(n),m[2][1].mul(s),m[0][2].mul(l),m[1][2].mul(c),m[2][2].mul(p)),x=add(u[0][0].mul(r),u[1][0].mul(a),u[2][0].mul(i),u[0][1].mul(d),u[1][1].mul(n),u[2][1].mul(s),u[0][2].mul(l),u[1][2].mul(c),u[2][2].mul(p)),N=v.mul(v).add(x.mul(x)).sqrt();return vec4(vec3(N),1)}))()}}export default SobelOperatorNode;export const sobel=e=>nodeObject(new SobelOperatorNode(convertToTexture(e)));
//# sourceMappingURL=/sm/bbcb127f84391af88eeb79f9c7d592e2a37e454bfabea4f3b722f828c5c97282.map