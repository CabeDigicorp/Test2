/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/core/NodeUtils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Color}from"../../math/Color.js";import{Matrix3}from"../../math/Matrix3.js";import{Matrix4}from"../../math/Matrix4.js";import{Vector2}from"../../math/Vector2.js";import{Vector3}from"../../math/Vector3.js";import{Vector4}from"../../math/Vector4.js";function cyrb53(t,r=0){let e=3735928559^r,o=1103547991^r;if(t instanceof Array)for(let r,i=0;i<t.length;i++)r=t[i],e=Math.imul(e^r,2654435761),o=Math.imul(o^r,1597334677);else for(let r,i=0;i<t.length;i++)r=t.charCodeAt(i),e=Math.imul(e^r,2654435761),o=Math.imul(o^r,1597334677);return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(e^e>>>13,3266489909),4294967296*(2097151&o)+(e>>>0)}export const hashString=t=>cyrb53(t);export const hashArray=t=>cyrb53(t);export const hash=(...t)=>cyrb53(t);export function getCacheKey(t,r=!1){const e=[];!0===t.isNode&&(e.push(t.id),t=t.getSelf());for(const{property:o,childNode:i}of getNodeChildren(t))e.push(e,cyrb53(o.slice(0,-4)),i.getCacheKey(r));return cyrb53(e)}export function*getNodeChildren(t,r=!1){for(const e in t){if(!0===e.startsWith("_"))continue;const o=t[e];if(!0===Array.isArray(o))for(let t=0;t<o.length;t++){const i=o[t];i&&(!0===i.isNode||r&&"function"==typeof i.toJSON)&&(yield{property:e,index:t,childNode:i})}else if(o&&!0===o.isNode)yield{property:e,childNode:o};else if("object"==typeof o)for(const t in o){const i=o[t];i&&(!0===i.isNode||r&&"function"==typeof i.toJSON)&&(yield{property:e,index:t,childNode:i})}}}export function getValueType(t){if(null==t)return null;const r=typeof t;return!0===t.isNode?"node":"number"===r?"float":"boolean"===r?"bool":"string"===r?"string":"function"===r?"shader":!0===t.isVector2?"vec2":!0===t.isVector3?"vec3":!0===t.isVector4?"vec4":!0===t.isMatrix3?"mat3":!0===t.isMatrix4?"mat4":!0===t.isColor?"color":t instanceof ArrayBuffer?"ArrayBuffer":null}export function getValueFromType(t,...r){const e=t?t.slice(-4):void 0;return 1===r.length&&("vec2"===e?r=[r[0],r[0]]:"vec3"===e?r=[r[0],r[0],r[0]]:"vec4"===e&&(r=[r[0],r[0],r[0],r[0]])),"color"===t?new Color(...r):"vec2"===e?new Vector2(...r):"vec3"===e?new Vector3(...r):"vec4"===e?new Vector4(...r):"mat3"===e?new Matrix3(...r):"mat4"===e?new Matrix4(...r):"bool"===t?r[0]||!1:"float"===t||"int"===t||"uint"===t?r[0]||0:"string"===t?r[0]||"":"ArrayBuffer"===t?base64ToArrayBuffer(r[0]):null}export function arrayBufferToBase64(t){let r="";const e=new Uint8Array(t);for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return btoa(r)}export function base64ToArrayBuffer(t){return Uint8Array.from(atob(t),(t=>t.charCodeAt(0))).buffer}
//# sourceMappingURL=/sm/610584485d3f91a32146d9d8fa57da1097613d2210287b16784a8e04f10936dc.map