/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/utils/LoopNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Node from"../core/Node.js";import{expression}from"../code/ExpressionNode.js";import{nodeObject,nodeArray}from"../tsl/TSLBase.js";class LoopNode extends Node{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode("i".charCodeAt()+e)}getProperties(e){const o=e.getNodeProperties(this);if(void 0!==o.stackNode)return o;const t={};for(let e=0,o=this.params.length-1;e<o;e++){const o=this.params[e],r=!0!==o.isNode&&o.name||this.getVarName(e),n=!0!==o.isNode&&o.type||"int";t[r]=expression(r,n)}const r=e.addStack();return o.returnsNode=this.params[this.params.length-1](t,r,e),o.stackNode=r,e.removeStack(),o}getNodeType(e){const{returnsNode:o}=this.getProperties(e);return o?o.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const o=this.getProperties(e),t=this.params,r=o.stackNode;for(let o=0,r=t.length-1;o<r;o++){const r=t[o];let n=null,s=null,d=null,a=null,i=null,p=null;r.isNode?(a="int",d=this.getVarName(o),n="0",s=r.build(e,a),i="<"):(a=r.type||"int",d=r.name||this.getVarName(o),n=r.start,s=r.end,i=r.condition,p=r.update,"number"==typeof n?n=e.generateConst(a,n):n&&n.isNode&&(n=n.build(e,a)),"number"==typeof s?s=e.generateConst(a,s):s&&s.isNode&&(s=s.build(e,a)),void 0!==n&&void 0===s?(n+=" - 1",s="0",i=">="):void 0!==s&&void 0===n&&(n="0",i="<"),void 0===i&&(i=Number(n)>Number(s)?">=":"<"));const l={start:n,end:s,condition:i},u=l.start,c=l.end;let N="",m="",g="";p||(p="int"===a||"uint"===a?i.includes("<")?"++":"--":i.includes("<")?"+= 1.":"-= 1."),N+=e.getVar(a,d)+" = "+u,m+=d+" "+i+" "+c,g+=d+" "+p;const h=`for ( ${N}; ${m}; ${g} )`;e.addFlowCode((0===o?"\n":"")+e.tab+h+" {\n\n").addFlowTab()}const n=r.build(e,"void"),s=o.returnsNode?o.returnsNode.build(e):"";e.removeFlowTab().addFlowCode("\n"+e.tab+n);for(let o=0,t=this.params.length-1;o<t;o++)e.addFlowCode((0===o?"":e.tab)+"}\n\n").removeFlowTab();return e.addFlowTab(),s}}export default LoopNode;export const Loop=(...e)=>nodeObject(new LoopNode(nodeArray(e,"int"))).append();export const Continue=()=>expression("continue").append();export const Break=()=>expression("break").append();export const loop=(...e)=>(console.warn("TSL.LoopNode: loop() has been renamed to Loop()."),Loop(...e));
//# sourceMappingURL=/sm/d9690e8dfca6f66fd6a1fe443019a4c54bf256b42e99e30bab14f032511ba5d5.map