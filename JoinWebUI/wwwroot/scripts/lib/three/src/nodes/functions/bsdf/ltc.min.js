/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/functions/BSDF/LTC.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Fn,If,mat3,vec2,vec3}from"../../tsl/TSLBase.js";import{max}from"../../math/MathNode.js";const LTC_Uv=Fn((({N:e,V:t,roughness:a})=>{const o=e.dot(t).saturate(),r=vec2(a,o.oneMinus().sqrt());return r.assign(r.mul(.984375).add(.0078125)),r})).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),LTC_ClippedSphereFormFactor=Fn((({f:e})=>{const t=e.length();return max(t.mul(t).add(e.z).div(t.add(1)),0)})).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),LTC_EdgeVectorFormFactor=Fn((({v1:e,v2:t})=>{const a=e.dot(t),o=a.abs().toVar(),r=o.mul(.0145206).add(.4965155).mul(o).add(.8543985).toVar(),n=o.add(4.1616724).mul(o).add(3.417594).toVar(),m=r.div(n),s=a.greaterThan(0).select(m,max(a.mul(a).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(m));return e.cross(t).mul(s)})).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),LTC_Evaluate=Fn((({N:e,V:t,P:a,mInv:o,p0:r,p1:n,p2:m,p3:s})=>{const c=n.sub(r).toVar(),u=s.sub(r).toVar(),v=c.cross(u),p=vec3().toVar();return If(v.dot(a.sub(r)).greaterThanEqual(0),(()=>{const c=t.sub(e.mul(t.dot(e))).normalize(),u=e.cross(c).negate(),v=o.mul(mat3(c,u,e).transpose()).toVar(),d=v.mul(r.sub(a)).normalize().toVar(),l=v.mul(n.sub(a)).normalize().toVar(),i=v.mul(m.sub(a)).normalize().toVar(),F=v.mul(s.sub(a)).normalize().toVar(),y=vec3(0).toVar();y.addAssign(LTC_EdgeVectorFormFactor({v1:d,v2:l})),y.addAssign(LTC_EdgeVectorFormFactor({v1:l,v2:i})),y.addAssign(LTC_EdgeVectorFormFactor({v1:i,v2:F})),y.addAssign(LTC_EdgeVectorFormFactor({v1:F,v2:d})),p.assign(vec3(LTC_ClippedSphereFormFactor({f:y})))})),p})).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]});export{LTC_Evaluate,LTC_Uv};
//# sourceMappingURL=/sm/c1c7bde027e9a544cc36adbd4b596a1eae6099715ccdb924ffffff57224cf408.map