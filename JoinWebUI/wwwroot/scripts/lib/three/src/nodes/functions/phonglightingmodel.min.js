/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/functions/PhongLightingModel.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BasicLightingModel from"./BasicLightingModel.js";import F_Schlick from"./BSDF/F_Schlick.js";import BRDF_Lambert from"./BSDF/BRDF_Lambert.js";import{diffuseColor}from"../core/PropertyNode.js";import{transformedNormalView}from"../accessors/Normal.js";import{materialSpecularStrength}from"../accessors/MaterialNode.js";import{shininess,specularColor}from"../core/PropertyNode.js";import{positionViewDirection}from"../accessors/Position.js";import{Fn,float}from"../tsl/TSLBase.js";const G_BlinnPhong_Implicit=()=>float(.25),D_BlinnPhong=Fn((({dotNH:i})=>shininess.mul(float(.5)).add(1).mul(float(1/Math.PI)).mul(i.pow(shininess)))),BRDF_BlinnPhong=Fn((({lightDirection:i})=>{const o=i.add(positionViewDirection).normalize(),r=transformedNormalView.dot(o).clamp(),t=positionViewDirection.dot(o).clamp(),e=F_Schlick({f0:specularColor,f90:1,dotVH:t}),s=float(.25),l=D_BlinnPhong({dotNH:r});return e.mul(s).mul(l)}));class PhongLightingModel extends BasicLightingModel{constructor(i=!0){super(),this.specular=i}direct({lightDirection:i,lightColor:o,reflectedLight:r}){const t=transformedNormalView.dot(i).clamp().mul(o);r.directDiffuse.addAssign(t.mul(BRDF_Lambert({diffuseColor:diffuseColor.rgb}))),!0===this.specular&&r.directSpecular.addAssign(t.mul(BRDF_BlinnPhong({lightDirection:i})).mul(materialSpecularStrength))}indirect({ambientOcclusion:i,irradiance:o,reflectedLight:r}){r.indirectDiffuse.addAssign(o.mul(BRDF_Lambert({diffuseColor:diffuseColor}))),r.indirectDiffuse.mulAssign(i)}}export default PhongLightingModel;
//# sourceMappingURL=/sm/cddb8d82910266777a5a46ecf0c60af5f586ac2a389f39ecd13175972b121ba6.map