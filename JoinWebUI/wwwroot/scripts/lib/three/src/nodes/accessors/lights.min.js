/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/accessors/Lights.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{uniform}from"../core/UniformNode.js";import{renderGroup}from"../core/UniformGroupNode.js";import{Vector3}from"../../math/Vector3.js";import{cameraViewMatrix}from"./Camera.js";let uniformsLib;function getLightData(t){uniformsLib=uniformsLib||new WeakMap;let o=uniformsLib.get(t);return void 0===o&&uniformsLib.set(t,o={}),o}export function lightPosition(t){const o=getLightData(t);return o.position||(o.position=uniform(new Vector3).setGroup(renderGroup).onRenderUpdate(((o,r)=>r.value.setFromMatrixPosition(t.matrixWorld))))}export function lightTargetPosition(t){const o=getLightData(t);return o.targetPosition||(o.targetPosition=uniform(new Vector3).setGroup(renderGroup).onRenderUpdate(((o,r)=>r.value.setFromMatrixPosition(t.target.matrixWorld))))}export function lightViewPosition(t){const o=getLightData(t);return o.viewPosition||(o.viewPosition=uniform(new Vector3).setGroup(renderGroup).onRenderUpdate((({camera:o},r)=>{r.value=r.value||new Vector3,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(o.matrixWorldInverse)})))}export const lightTargetDirection=t=>cameraViewMatrix.transformDirection(lightPosition(t).sub(lightTargetPosition(t)));
//# sourceMappingURL=/sm/90ce942c3ac303521c83f3d3bf880c1a1ec32292fbd8af006f71dca65b7879e5.map