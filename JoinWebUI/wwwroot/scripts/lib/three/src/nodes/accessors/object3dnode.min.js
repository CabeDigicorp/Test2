/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/nodes/accessors/Object3DNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Node from"../core/Node.js";import{NodeUpdateType}from"../core/constants.js";import UniformNode from"../core/UniformNode.js";import{nodeProxy}from"../tsl/TSLBase.js";import{Vector3}from"../../math/Vector3.js";class Object3DNode extends Node{static get type(){return"Object3DNode"}constructor(e,o=null){super(),this.scope=e,this.object3d=o,this.updateType=NodeUpdateType.OBJECT,this._uniformNode=new UniformNode(null)}getNodeType(){const e=this.scope;return e===Object3DNode.WORLD_MATRIX?"mat4":e===Object3DNode.POSITION||e===Object3DNode.VIEW_POSITION||e===Object3DNode.DIRECTION||e===Object3DNode.SCALE?"vec3":void 0}update(e){const o=this.object3d,t=this._uniformNode,r=this.scope;if(r===Object3DNode.WORLD_MATRIX)t.value=o.matrixWorld;else if(r===Object3DNode.POSITION)t.value=t.value||new Vector3,t.value.setFromMatrixPosition(o.matrixWorld);else if(r===Object3DNode.SCALE)t.value=t.value||new Vector3,t.value.setFromMatrixScale(o.matrixWorld);else if(r===Object3DNode.DIRECTION)t.value=t.value||new Vector3,o.getWorldDirection(t.value);else if(r===Object3DNode.VIEW_POSITION){const r=e.camera;t.value=t.value||new Vector3,t.value.setFromMatrixPosition(o.matrixWorld),t.value.applyMatrix4(r.matrixWorldInverse)}}generate(e){const o=this.scope;return o===Object3DNode.WORLD_MATRIX?this._uniformNode.nodeType="mat4":o!==Object3DNode.POSITION&&o!==Object3DNode.VIEW_POSITION&&o!==Object3DNode.DIRECTION&&o!==Object3DNode.SCALE||(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Object3DNode.WORLD_MATRIX="worldMatrix",Object3DNode.POSITION="position",Object3DNode.SCALE="scale",Object3DNode.VIEW_POSITION="viewPosition",Object3DNode.DIRECTION="direction";export default Object3DNode;export const objectDirection=nodeProxy(Object3DNode,Object3DNode.DIRECTION);export const objectWorldMatrix=nodeProxy(Object3DNode,Object3DNode.WORLD_MATRIX);export const objectPosition=nodeProxy(Object3DNode,Object3DNode.POSITION);export const objectScale=nodeProxy(Object3DNode,Object3DNode.SCALE);export const objectViewPosition=nodeProxy(Object3DNode,Object3DNode.VIEW_POSITION);
//# sourceMappingURL=/sm/784e48bf75c2e3f869808593911a6d1ad12111a759fd270e418647cb7bf180f7.map