/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/renderers/common/RenderList.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{DoubleSide}from"../../constants.js";function painterSortStable(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.material.id!==r.material.id?e.material.id-r.material.id:e.z!==r.z?e.z-r.z:e.id-r.id}function reversePainterSortStable(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id-r.id}function needsDoublePass(e){return(e.transmission>0||e.transmissionNode)&&e.side===DoubleSide&&!1===e.forceSinglePass}class RenderList{constructor(e,r,t){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(r,t),this.lightsArray=[],this.scene=r,this.camera=t,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,r,t,s,n,i){let d=this.renderItems[this.renderItemsIndex];return void 0===d?(d={id:e.id,object:e,geometry:r,material:t,groupOrder:s,renderOrder:e.renderOrder,z:n,group:i},this.renderItems[this.renderItemsIndex]=d):(d.id=e.id,d.object=e,d.geometry=r,d.material=t,d.groupOrder=s,d.renderOrder=e.renderOrder,d.z=n,d.group=i),this.renderItemsIndex++,d}push(e,r,t,s,n,i){const d=this.getNextRenderItem(e,r,t,s,n,i);!0===e.occlusionTest&&this.occlusionQueryCount++,!0===t.transparent||t.transmission>0?(needsDoublePass(t)&&this.transparentDoublePass.push(d),this.transparent.push(d)):this.opaque.push(d)}unshift(e,r,t,s,n,i){const d=this.getNextRenderItem(e,r,t,s,n,i);!0===t.transparent||t.transmission>0?(needsDoublePass(t)&&this.transparentDoublePass.unshift(d),this.transparent.unshift(d)):this.opaque.unshift(d)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,r){this.opaque.length>1&&this.opaque.sort(e||painterSortStable),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(r||reversePainterSortStable),this.transparent.length>1&&this.transparent.sort(r||reversePainterSortStable)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const r=this.renderItems[e];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.groupOrder=null,r.renderOrder=null,r.z=null,r.group=null}}}export default RenderList;
//# sourceMappingURL=/sm/4598f4e691f7c62ab3acadaac6edbf8cd252cf55cc781ac078f05ddde485127e.map