/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/src/renderers/webgl/WebGLGeometries.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Uint16BufferAttribute,Uint32BufferAttribute}from"../../core/BufferAttribute.js";import{arrayNeedsUint32}from"../../utils.js";function WebGLGeometries(e,t,r,n){const o={},i=new WeakMap;function s(e){const u=e.target;null!==u.index&&t.remove(u.index);for(const e in u.attributes)t.remove(u.attributes[e]);for(const e in u.morphAttributes){const r=u.morphAttributes[e];for(let e=0,n=r.length;e<n;e++)t.remove(r[e])}u.removeEventListener("dispose",s),delete o[u.id];const f=i.get(u);f&&(t.remove(f),i.delete(u)),n.releaseStatesOfGeometry(u),!0===u.isInstancedBufferGeometry&&delete u._maxInstanceCount,r.memory.geometries--}function u(e){const r=[],n=e.index,o=e.attributes.position;let s=0;if(null!==n){const e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],o=e[t+1],i=e[t+2];r.push(n,o,o,i,i,n)}}else{if(void 0===o)return;{const e=o.array;s=o.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,o=t+2;r.push(e,n,n,o,o,e)}}}const u=new(arrayNeedsUint32(r)?Uint32BufferAttribute:Uint16BufferAttribute)(r,1);u.version=s;const f=i.get(e);f&&t.remove(f),i.set(e,u)}return{get:function(e,t){return!0===o[t.id]||(t.addEventListener("dispose",s),o[t.id]=!0,r.memory.geometries++),t},update:function(r){const n=r.attributes;for(const r in n)t.update(n[r],e.ARRAY_BUFFER);const o=r.morphAttributes;for(const r in o){const n=o[r];for(let r=0,o=n.length;r<o;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=i.get(e);if(t){const r=e.index;null!==r&&t.version<r.version&&u(e)}else u(e);return i.get(e)}}}export{WebGLGeometries};
//# sourceMappingURL=/sm/85a6d1e717f29b0f17e7f31ce58c2cee6834d0d931751ffb669bcd86b409cd30.map