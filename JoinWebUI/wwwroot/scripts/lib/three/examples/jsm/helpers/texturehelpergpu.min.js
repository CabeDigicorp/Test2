/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/examples/jsm/helpers/TextureHelperGPU.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{BoxGeometry,BufferAttribute,Mesh,PlaneGeometry,Vector3}from"three";import{NodeMaterial,texture as textureNode,cubeTexture,texture3D,float,vec4}from"three/tsl";import{mergeGeometries}from"../utils/BufferGeometryUtils.js";class TextureHelper extends Mesh{constructor(e,t=1,r=1,u=1){const o=new NodeMaterial;let s;o.name="TextureHelper",s=e.isCubeTexture?cubeTexture(e):e.isData3DTexture||e.isCompressed3DTexture?texture3D(e):textureNode(e);const i=float(getAlpha(e));o.colorNode=vec4(s.rgb,i);super(e.isCubeTexture?createCubeGeometry(t,r,u):createSliceGeometry(e,t,r,u),o),this.texture=e,this.type="TextureHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}function getImageCount(e){return e.isCubeTexture?6:e.isDataArrayTexture||e.isCompressedArrayTexture||e.isData3DTexture||e.isCompressed3DTexture?e.image.depth:1}function getAlpha(e){return e.isCubeTexture?1:e.isDataArrayTexture||e.isCompressedArrayTexture||e.isData3DTexture||e.isCompressed3DTexture?Math.max(1/e.image.depth,.25):1}function createCubeGeometry(e,t,r){const u=new BoxGeometry(e,t,r),o=u.attributes.position,s=u.attributes.uv,i=new BufferAttribute(new Float32Array(3*s.count),3),a=new Vector3;for(let e=0,t=s.count;e<t;++e){a.fromBufferAttribute(o,e).normalize();const t=a.x,r=a.y,u=a.z;i.setXYZ(e,t,r,u)}return u.deleteAttribute("uv"),u.setAttribute("uv",i),u}function createSliceGeometry(e,t,r,u){const o=getImageCount(e),s=[];for(let i=0;i<o;++i){const a=new PlaneGeometry(t,r);o>1&&a.translate(0,0,u*(i/(o-1)-.5));const n=a.attributes.uv,m=new BufferAttribute(new Float32Array(3*n.count),3);for(let t=0,r=n.count;t<r;++t){const r=n.getX(t),u=e.flipY?n.getY(t):1-n.getY(t),s=1===o?1:e.isDataArrayTexture||e.isCompressedArrayTexture?i:i/(o-1);m.setXYZ(t,r,u,s)}a.deleteAttribute("uv"),a.setAttribute("uv",m),s.push(a)}return mergeGeometries(s)}export{TextureHelper};
//# sourceMappingURL=/sm/3af18f7fbda0b944f8326d45f2498bb775a7236933ebc250ea0b2f93357b3404.map