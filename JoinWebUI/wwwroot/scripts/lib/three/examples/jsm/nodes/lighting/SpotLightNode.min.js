/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/lighting/SpotLightNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import AnalyticLightNode from"./AnalyticLightNode.js";import{lightTargetDirection}from"./LightNode.js";import{addLightNode}from"./LightsNode.js";import{getDistanceAttenuation}from"./LightUtils.js";import{uniform}from"../core/UniformNode.js";import{smoothstep}from"../math/MathNode.js";import{objectViewPosition}from"../accessors/Object3DNode.js";import{positionView}from"../accessors/PositionNode.js";import{addNodeClass}from"../core/Node.js";import{SpotLight}from"three";class SpotLightNode extends AnalyticLightNode{constructor(t=null){super(t),this.coneCosNode=uniform(0),this.penumbraCosNode=uniform(0),this.cutoffDistanceNode=uniform(0),this.decayExponentNode=uniform(0)}update(t){super.update(t);const{light:o}=this;this.coneCosNode.value=Math.cos(o.angle),this.penumbraCosNode.value=Math.cos(o.angle*(1-o.penumbra)),this.cutoffDistanceNode.value=o.distance,this.decayExponentNode.value=o.decay}getSpotAttenuation(t){const{coneCosNode:o,penumbraCosNode:e}=this;return smoothstep(o,e,t)}setup(t){super.setup(t);const o=t.context.lightingModel,{colorNode:e,cutoffDistanceNode:i,decayExponentNode:s,light:n}=this,d=objectViewPosition(n).sub(positionView),r=d.normalize(),a=r.dot(lightTargetDirection(n)),c=this.getSpotAttenuation(a),h=d.length(),p=getDistanceAttenuation({lightDistance:h,cutoffDistance:i,decayExponent:s}),m=e.mul(c).mul(p),g=t.context.reflectedLight;o.direct({lightDirection:r,lightColor:m,reflectedLight:g},t.stack,t)}}export default SpotLightNode;addNodeClass("SpotLightNode",SpotLightNode),addLightNode(SpotLight,SpotLightNode);
//# sourceMappingURL=/sm/e36b796f2adc7d04bdc06f299cfb05437bcec94d5a5104c0d260cad2682bb97a.map