/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/accessors/BufferAttributeNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import InputNode from"../core/InputNode.js";import{addNodeClass}from"../core/Node.js";import{varying}from"../core/VaryingNode.js";import{nodeObject,addNodeElement}from"../shadernode/ShaderNode.js";import{InterleavedBufferAttribute,InterleavedBuffer,StaticDrawUsage,DynamicDrawUsage}from"three";class BufferAttributeNode extends InputNode{constructor(e,t=null,r=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=r,this.bufferOffset=i,this.usage=StaticDrawUsage,this.instanced=!1,this.attribute=null,e&&!0===e.isBufferAttribute&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getNodeType(e){return null===this.bufferType&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(null!==this.attribute)return;const t=this.getNodeType(e),r=this.value,i=e.getTypeLength(t),s=this.bufferStride||i,u=this.bufferOffset,f=!0===r.isInterleavedBuffer?r:new InterleavedBuffer(r,s),n=new InterleavedBufferAttribute(f,i,u);f.setUsage(this.usage),this.attribute=n,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(r);let s=null;if("vertex"===e.shaderStage)s=i;else{s=varying(this).build(e,t)}return s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this}setInstanced(e){return this.instanced=e,this}}export default BufferAttributeNode;export const bufferAttribute=(e,t,r,i)=>nodeObject(new BufferAttributeNode(e,t,r,i));export const dynamicBufferAttribute=(e,t,r,i)=>bufferAttribute(e,t,r,i).setUsage(DynamicDrawUsage);export const instancedBufferAttribute=(e,t,r,i)=>bufferAttribute(e,t,r,i).setInstanced(!0);export const instancedDynamicBufferAttribute=(e,t,r,i)=>dynamicBufferAttribute(e,t,r,i).setInstanced(!0);addNodeElement("toAttribute",(e=>bufferAttribute(e.value))),addNodeClass("BufferAttributeNode",BufferAttributeNode);
//# sourceMappingURL=/sm/21e7ae363a73d270a4e28eaff371510828c56bb3ce1ba4c4e23dc754eb00d4a3.map