/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/display/ViewportNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Node,{addNodeClass}from"../core/Node.js";import{NodeUpdateType}from"../core/constants.js";import{uniform}from"../core/UniformNode.js";import{nodeImmutable,vec2}from"../shadernode/ShaderNode.js";import{Vector2,Vector4}from"three";let resolution,viewportResult;class ViewportNode extends Node{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===ViewportNode.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=NodeUpdateType.NONE;return this.scope!==ViewportNode.RESOLUTION&&this.scope!==ViewportNode.VIEWPORT||(e=NodeUpdateType.FRAME),this.updateType=e,e}update({renderer:e}){this.scope===ViewportNode.VIEWPORT?e.getViewport(viewportResult):e.getDrawingBufferSize(resolution)}setup(){const e=this.scope;if(e===ViewportNode.COORDINATE)return;let o=null;if(e===ViewportNode.RESOLUTION)o=uniform(resolution||(resolution=new Vector2));else if(e===ViewportNode.VIEWPORT)o=uniform(viewportResult||(viewportResult=new Vector4));else{o=viewportCoordinate.div(viewportResolution);let t=o.x,r=o.y;/bottom/i.test(e)&&(r=r.oneMinus()),/right/i.test(e)&&(t=t.oneMinus()),o=vec2(t,r)}return o}generate(e){if(this.scope===ViewportNode.COORDINATE){let o=e.getFragCoord();if(e.isFlipY()){const t=e.getNodeProperties(viewportResolution).outputNode.build(e);o=`${e.getType("vec2")}( ${o}.x, ${t}.y - ${o}.y )`}return o}return super.generate(e)}}ViewportNode.COORDINATE="coordinate",ViewportNode.RESOLUTION="resolution",ViewportNode.VIEWPORT="viewport",ViewportNode.TOP_LEFT="topLeft",ViewportNode.BOTTOM_LEFT="bottomLeft",ViewportNode.TOP_RIGHT="topRight",ViewportNode.BOTTOM_RIGHT="bottomRight";export default ViewportNode;export const viewportCoordinate=nodeImmutable(ViewportNode,ViewportNode.COORDINATE);export const viewportResolution=nodeImmutable(ViewportNode,ViewportNode.RESOLUTION);export const viewport=nodeImmutable(ViewportNode,ViewportNode.VIEWPORT);export const viewportTopLeft=nodeImmutable(ViewportNode,ViewportNode.TOP_LEFT);export const viewportBottomLeft=nodeImmutable(ViewportNode,ViewportNode.BOTTOM_LEFT);export const viewportTopRight=nodeImmutable(ViewportNode,ViewportNode.TOP_RIGHT);export const viewportBottomRight=nodeImmutable(ViewportNode,ViewportNode.BOTTOM_RIGHT);addNodeClass("ViewportNode",ViewportNode);
//# sourceMappingURL=/sm/ed8d359d9f6d6b53c395a6f92240d74a085f1219ea4f2eee4419cb191f689a2b.map