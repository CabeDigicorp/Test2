/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/display/ToneMappingNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TempNode from"../core/TempNode.js";import{addNodeClass}from"../core/Node.js";import{tslFn,nodeObject,float,mat3}from"../shadernode/ShaderNode.js";import{NoToneMapping,LinearToneMapping,ReinhardToneMapping,CineonToneMapping,ACESFilmicToneMapping}from"three";const LinearToneMappingNode=tslFn((({color:e,exposure:o})=>e.mul(o).clamp())),ReinhardToneMappingNode=tslFn((({color:e,exposure:o})=>(e=e.mul(o)).div(e.add(1)).clamp())),OptimizedCineonToneMappingNode=tslFn((({color:e,exposure:o})=>{const n=(e=(e=e.mul(o)).sub(.004).max(0)).mul(e.mul(6.2).add(.5)),p=e.mul(e.mul(6.2).add(1.7)).add(.06);return n.div(p).pow(2.2)})),RRTAndODTFit=tslFn((({color:e})=>{const o=e.mul(e.add(.0245786)).sub(90537e-9),n=e.mul(e.add(.432951).mul(.983729)).add(.238081);return o.div(n)})),ACESFilmicToneMappingNode=tslFn((({color:e,exposure:o})=>{const n=mat3(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),p=mat3(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return e=e.mul(o).div(.6),e=n.mul(e),e=RRTAndODTFit({color:e}),(e=p.mul(e)).clamp()})),toneMappingLib={[LinearToneMapping]:LinearToneMappingNode,[ReinhardToneMapping]:ReinhardToneMappingNode,[CineonToneMapping]:OptimizedCineonToneMappingNode,[ACESFilmicToneMapping]:ACESFilmicToneMappingNode};class ToneMappingNode extends TempNode{constructor(e=NoToneMapping,o=float(1),n=null){super("vec3"),this.toneMapping=e,this.exposureNode=o,this.colorNode=n}getCacheKey(){let e=super.getCacheKey();return e="{toneMapping:"+this.toneMapping+",nodes:"+e+"}",e}setup(e){const o=this.colorNode||e.context.color,n=this.toneMapping;if(n===NoToneMapping)return o;const p={exposure:this.exposureNode,color:o},i=toneMappingLib[n];let a=null;return i?a=i(p):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),a=o),a}}export default ToneMappingNode;export const toneMapping=(e,o,n)=>nodeObject(new ToneMappingNode(e,nodeObject(o),nodeObject(n)));addNodeClass("ToneMappingNode",ToneMappingNode);
//# sourceMappingURL=/sm/9dbc0abd41e66cd743c7698607a76bff630123fcfb50c136d89f446c818f7f57.map