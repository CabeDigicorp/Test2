/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/utils/LoopNode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Node,{addNodeClass}from"../core/Node.js";import{expression}from"../code/ExpressionNode.js";import{bypass}from"../core/BypassNode.js";import{context}from"../core/ContextNode.js";import{addNodeElement,nodeObject,nodeArray}from"../shadernode/ShaderNode.js";class LoopNode extends Node{constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode("i".charCodeAt()+e)}getProperties(e){const o=e.getNodeProperties(this);if(void 0!==o.stackNode)return o;const t={};for(let e=0,o=this.params.length-1;e<o;e++){const o=this.params[e],r=!0!==o.isNode&&o.name||this.getVarName(e),d=!0!==o.isNode&&o.type||"int";t[r]=expression(r,d)}return o.returnsNode=this.params[this.params.length-1](t,e.addStack(),e),o.stackNode=e.removeStack(),o}getNodeType(e){const{returnsNode:o}=this.getProperties(e);return o?o.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const o=this.getProperties(e),t=this.params,r=o.stackNode;for(let o=0,r=t.length-1;o<r;o++){const r=t[o];let d=null,s=null,n=null,a=null,i=null,p=null;r.isNode?(a="int",n=this.getVarName(o),d="0",s=r.build(e,a),i="<"):(a=r.type||"int",n=r.name||this.getVarName(o),d=r.start,s=r.end,i=r.condition,p=r.update,"number"==typeof d?d=d.toString():d&&d.isNode&&(d=d.build(e,a)),"number"==typeof s?s=s.toString():s&&s.isNode&&(s=s.build(e,a)),void 0!==d&&void 0===s?(d+=" - 1",s="0",i=">="):void 0!==s&&void 0===d&&(d="0",i="<"),void 0===i&&(i=Number(d)>Number(s)?">=":"<"));const l={start:d,end:s,condition:i},N=l.start,m=l.end;let c="",u="",h="";p||(p="int"===a?i.includes("<")?"++":"--":i.includes("<")?"+= 1":"-= 1"),c+=e.getVar(a,n)+" = "+N,u+=n+" "+i+" "+m,h+=n+" "+p;const b=`for ( ${c}; ${u}; ${h} )`;e.addFlowCode((0===o?"\n":"")+e.tab+b+" {\n\n").addFlowTab()}const d=context(r,{tempWrite:!1}).build(e,"void"),s=o.returnsNode?o.returnsNode.build(e):"";e.removeFlowTab().addFlowCode("\n"+e.tab+d);for(let o=0,t=this.params.length-1;o<t;o++)e.addFlowCode((0===o?"":e.tab)+"}\n\n").removeFlowTab();return e.addFlowTab(),s}}export default LoopNode;export const loop=(...e)=>nodeObject(new LoopNode(nodeArray(e,"int"))).append();addNodeElement("loop",((e,...o)=>bypass(e,loop(...o)))),addNodeClass("LoopNode",LoopNode);
//# sourceMappingURL=/sm/e4ca069eed2c4d57c114e401ebae48ea573f89f5881d046b960118604036495e.map