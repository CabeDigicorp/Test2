/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/nodes/core/NodeFrame.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{NodeUpdateType}from"./constants.js";class NodeFrame{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let a=e.get(t);return void 0===a&&(a={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,a)),a}updateBeforeNode(e){const t=e.getUpdateBeforeType(),a=e.updateReference(this);if(t===NodeUpdateType.FRAME){const{frameMap:t}=this._getMaps(this.updateBeforeMap,a);t.get(e)!==this.frameId&&(t.set(e,this.frameId),e.updateBefore(this))}else if(t===NodeUpdateType.RENDER){const{renderMap:t}=this._getMaps(this.updateBeforeMap,a);t.get(e)!==this.renderId&&(t.set(e,this.renderId),e.updateBefore(this))}else t===NodeUpdateType.OBJECT&&e.updateBefore(this)}updateNode(e){const t=e.getUpdateType(),a=e.updateReference(this);if(t===NodeUpdateType.FRAME){const{frameMap:t}=this._getMaps(this.updateMap,a);t.get(e)!==this.frameId&&(t.set(e,this.frameId),e.update(this))}else if(t===NodeUpdateType.RENDER){const{renderMap:t}=this._getMaps(this.updateMap,a);t.get(e)!==this.renderId&&(t.set(e,this.renderId),e.update(this))}else t===NodeUpdateType.OBJECT&&e.update(this)}update(){this.frameId++,void 0===this.lastTime&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}export default NodeFrame;
//# sourceMappingURL=/sm/4bc70311faa1747542174ab48ef4ab6ac001c3bc50b3d53f647e3ebb4d15831f.map