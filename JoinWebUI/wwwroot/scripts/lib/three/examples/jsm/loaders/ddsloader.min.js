/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/examples/jsm/loaders/DDSLoader.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{CompressedTextureLoader,RGBAFormat,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_S3TC_DXT1_Format,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format}from"three";class DDSLoader extends CompressedTextureLoader{constructor(r){super(r)}parse(r,e){const t={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function a(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function o(r,e,t,a){const o=t*a*4,n=new Uint8Array(r,e,o),m=new Uint8Array(o);let s=0,c=0;for(let r=0;r<a;r++)for(let r=0;r<t;r++){const r=n[c];c++;const e=n[c];c++;const t=n[c];c++;const a=n[c];c++,m[s]=t,s++,m[s]=e,s++,m[s]=r,s++,m[s]=a,s++}return m}const n=a("DXT1"),m=a("DXT3"),s=a("DXT5"),c=a("ETC1"),_=a("DX10"),i=new Int32Array(r,0,31);if(542327876!==i[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),t;let p;const C=i[21];let d=!1,u=i[1]+4;switch(C){case n:p=8,t.format=RGB_S3TC_DXT1_Format;break;case m:p=16,t.format=RGBA_S3TC_DXT3_Format;break;case s:p=16,t.format=RGBA_S3TC_DXT5_Format;break;case c:p=8,t.format=RGB_ETC1_Format;break;case _:u+=20;const e=new Int32Array(r,128,5)[0];switch(e){case 96:p=16,t.format=RGB_BPTC_SIGNED_Format;break;case 95:p=16,t.format=RGB_BPTC_UNSIGNED_Format;break;default:return console.error("THREE.DDSLoader.parse: Unsupported DXGI_FORMAT code ",e),t}break;default:if(!(32===i[22]&&16711680&i[23]&&65280&i[24]&&255&i[25]&&4278190080&i[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(D=C,String.fromCharCode(255&D,D>>8&255,D>>16&255,D>>24&255))),t;d=!0,p=64,t.format=RGBAFormat}var D;t.mipmapCount=1,131072&i[2]&&!1!==e&&(t.mipmapCount=Math.max(1,i[7]));const T=i[28];if(t.isCubemap=!!(512&T),t.isCubemap&&(!(1024&T)||!(2048&T)||!(4096&T)||!(8192&T)||!(16384&T)||!(32768&T)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),t;t.width=i[4],t.height=i[3];const h=t.isCubemap?6:1;for(let e=0;e<h;e++){let e=t.width,a=t.height;for(let n=0;n<t.mipmapCount;n++){let n,m;d?(n=o(r,u,e,a),m=n.length):(m=Math.max(4,e)/4*Math.max(4,a)/4*p,n=new Uint8Array(r,u,m));const s={data:n,width:e,height:a};t.mipmaps.push(s),u+=m,e=Math.max(e>>1,1),a=Math.max(a>>1,1)}}return t}}export{DDSLoader};
//# sourceMappingURL=/sm/17741373c979f63db000892310256407ea1c77dffff905077ca436b24e44469c.map