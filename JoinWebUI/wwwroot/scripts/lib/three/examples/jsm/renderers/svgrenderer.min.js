/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/examples/jsm/renderers/SVGRenderer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Box2,Camera,Color,Matrix3,Matrix4,Object3D,SRGBColorSpace,Vector3}from"three";import{Projector}from"../renderers/Projector.js";import{RenderableFace}from"../renderers/Projector.js";import{RenderableLine}from"../renderers/Projector.js";import{RenderableSprite}from"../renderers/Projector.js";class SVGObject extends Object3D{constructor(e){super(),this.isSVGObject=!0,this.node=e}}class SVGRenderer{constructor(){let e,t,o,i,r,n,s,c,a,l,p,d,S,u=0,h=null,f=1;const m=this,y=new Box2,x=new Box2,g=new Color,w=new Color,b=new Color,M=new Color,C=new Color,v=new Color,j=new Vector3,z=new Vector3,P=new Vector3,R=new Matrix3,L=new Matrix4,k=new Matrix4,B=[],G=new Projector,V=document.createElementNS("http://www.w3.org/2000/svg","svg");function E(){for(u=0;V.childNodes.length>0;)V.removeChild(V.childNodes[0])}function A(e){return null!==h?e.toFixed(h):e}function F(e,t,o){let i=t.scale.x*n,r=t.scale.y*s;o.isPointsMaterial&&(i*=o.size,r*=o.size);const c="M"+A(e.x-.5*i)+","+A(e.y-.5*r)+"h"+A(i)+"v"+A(r)+"h"+A(-i)+"z";let a="";(o.isSpriteMaterial||o.isPointsMaterial)&&(a="fill:"+o.color.getStyle(m.outputColorSpace)+";fill-opacity:"+o.opacity),D(a,c)}function O(e,t,o){const i="M"+A(e.positionScreen.x)+","+A(e.positionScreen.y)+"L"+A(t.positionScreen.x)+","+A(t.positionScreen.y);if(o.isLineBasicMaterial){let e="fill:none;stroke:"+o.color.getStyle(m.outputColorSpace)+";stroke-opacity:"+o.opacity+";stroke-width:"+o.linewidth+";stroke-linecap:"+o.linecap;o.isLineDashedMaterial&&(e=e+";stroke-dasharray:"+o.dashSize+","+o.gapSize),D(e,i)}}function W(e,t,i,r,n){m.info.render.vertices+=3,m.info.render.faces++;const s="M"+A(e.positionScreen.x)+","+A(e.positionScreen.y)+"L"+A(t.positionScreen.x)+","+A(t.positionScreen.y)+"L"+A(i.positionScreen.x)+","+A(i.positionScreen.y)+"z";let c="";n.isMeshBasicMaterial?(g.copy(n.color),n.vertexColors&&g.multiply(r.color)):n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial?(w.copy(n.color),n.vertexColors&&w.multiply(r.color),g.copy(b),z.copy(e.positionWorld).add(t.positionWorld).add(i.positionWorld).divideScalar(3),function(e,t,o,i){for(let r=0,n=e.length;r<n;r++){const n=e[r],s=n.color;if(n.isDirectionalLight){const e=j.setFromMatrixPosition(n.matrixWorld).normalize();let t=o.dot(e);if(t<=0)continue;t*=n.intensity,i.r+=s.r*t,i.g+=s.g*t,i.b+=s.b*t}else if(n.isPointLight){const e=j.setFromMatrixPosition(n.matrixWorld);let r=o.dot(j.subVectors(e,t).normalize());if(r<=0)continue;if(r*=0==n.distance?1:1-Math.min(t.distanceTo(e)/n.distance,1),0==r)continue;r*=n.intensity,i.r+=s.r*r,i.g+=s.g*r,i.b+=s.b*r}}}(o,z,r.normalModel,g),g.multiply(w).add(n.emissive)):n.isMeshNormalMaterial&&(P.copy(r.normalModel).applyMatrix3(R).normalize(),g.setRGB(P.x,P.y,P.z).multiplyScalar(.5).addScalar(.5)),c=n.wireframe?"fill:none;stroke:"+g.getStyle(m.outputColorSpace)+";stroke-opacity:"+n.opacity+";stroke-width:"+n.wireframeLinewidth+";stroke-linecap:"+n.wireframeLinecap+";stroke-linejoin:"+n.wireframeLinejoin:"fill:"+g.getStyle(m.outputColorSpace)+";fill-opacity:"+n.opacity,D(c,s)}function N(e,t,o){let i=t.x-e.x,r=t.y-e.y;const n=i*i+r*r;if(0===n)return;const s=o/Math.sqrt(n);i*=s,r*=s,t.x+=i,t.y+=r,e.x-=i,e.y-=r}function D(e,t){S===e?d+=t:(I(),S=e,d=t)}function I(){d&&(p=function(e){if(null==B[e])return B[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==f&&B[e].setAttribute("shape-rendering","crispEdges"),B[e];return B[e]}(u++),p.setAttribute("d",d),p.setAttribute("style",S),V.appendChild(p)),d="",S=""}this.domElement=V,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.overdraw=.5,this.outputColorSpace=SRGBColorSpace,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":f=1;break;case"low":f=0}},this.setClearColor=function(e){v.set(e)},this.setPixelRatio=function(){},this.setSize=function(e,t){i=e,r=t,n=i/2,s=r/2,V.setAttribute("viewBox",-n+" "+-s+" "+i+" "+r),V.setAttribute("width",i),V.setAttribute("height",r),y.min.set(-n,-s),y.max.set(n,s)},this.getSize=function(){return{width:i,height:r}},this.setPrecision=function(e){h=e},this.clear=function(){E(),V.style.backgroundColor=v.getStyle(m.outputColorSpace)},this.render=function(i,r){if(r instanceof Camera==!1)return void console.error("THREE.SVGRenderer.render: camera is not an instance of Camera.");const p=i.background;p&&p.isColor?(E(),V.style.backgroundColor=p.getStyle(m.outputColorSpace)):!0===this.autoClear&&this.clear(),m.info.render.vertices=0,m.info.render.faces=0,L.copy(r.matrixWorldInverse),k.multiplyMatrices(r.projectionMatrix,L),e=G.projectScene(i,r,this.sortObjects,this.sortElements),t=e.elements,o=e.lights,R.getNormalMatrix(r.matrixWorldInverse),function(e){b.setRGB(0,0,0),M.setRGB(0,0,0),C.setRGB(0,0,0);for(let t=0,o=e.length;t<o;t++){const o=e[t],i=o.color;o.isAmbientLight?(b.r+=i.r,b.g+=i.g,b.b+=i.b):o.isDirectionalLight?(M.r+=i.r,M.g+=i.g,M.b+=i.b):o.isPointLight&&(C.r+=i.r,C.g+=i.g,C.b+=i.b)}}(o),d="",S="";for(let e=0,o=t.length;e<o;e++){const o=t[e],i=o.material;if(void 0!==i&&0!==i.opacity)if(x.makeEmpty(),o instanceof RenderableSprite)c=o,c.x*=n,c.y*=-s,F(c,o,i);else if(o instanceof RenderableLine)c=o.v1,a=o.v2,c.positionScreen.x*=n,c.positionScreen.y*=-s,a.positionScreen.x*=n,a.positionScreen.y*=-s,x.setFromPoints([c.positionScreen,a.positionScreen]),!0===y.intersectsBox(x)&&O(c,a,i);else if(o instanceof RenderableFace){if(c=o.v1,a=o.v2,l=o.v3,c.positionScreen.z<-1||c.positionScreen.z>1)continue;if(a.positionScreen.z<-1||a.positionScreen.z>1)continue;if(l.positionScreen.z<-1||l.positionScreen.z>1)continue;c.positionScreen.x*=n,c.positionScreen.y*=-s,a.positionScreen.x*=n,a.positionScreen.y*=-s,l.positionScreen.x*=n,l.positionScreen.y*=-s,this.overdraw>0&&(N(c.positionScreen,a.positionScreen,this.overdraw),N(a.positionScreen,l.positionScreen,this.overdraw),N(l.positionScreen,c.positionScreen,this.overdraw)),x.setFromPoints([c.positionScreen,a.positionScreen,l.positionScreen]),!0===y.intersectsBox(x)&&W(c,a,l,o,i)}}I(),i.traverseVisible((function(e){if(e.isSVGObject){if(j.setFromMatrixPosition(e.matrixWorld),j.applyMatrix4(k),j.z<-1||j.z>1)return;const t=j.x*n,o=-j.y*s,i=e.node;i.setAttribute("transform","translate("+t+","+o+")"),V.appendChild(i)}}))}}}export{SVGObject,SVGRenderer};
//# sourceMappingURL=/sm/8370cc35c8f0b1d57b529180f2c3d62b2f8695632548d81249dc02d36ecd74ce.map