/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.160.1/examples/jsm/renderers/common/RenderList.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{LightsNode}from"../../nodes/Nodes.js";function painterSortStable(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function reversePainterSortStable(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}class RenderList{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.lightsNode=new LightsNode([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(r,e,t,s,n,i){let d=this.renderItems[this.renderItemsIndex];return void 0===d?(d={id:r.id,object:r,geometry:e,material:t,groupOrder:s,renderOrder:r.renderOrder,z:n,group:i},this.renderItems[this.renderItemsIndex]=d):(d.id=r.id,d.object=r,d.geometry=e,d.material=t,d.groupOrder=s,d.renderOrder=r.renderOrder,d.z=n,d.group=i),this.renderItemsIndex++,d}push(r,e,t,s,n,i){const d=this.getNextRenderItem(r,e,t,s,n,i);!0===r.occlusionTest&&this.occlusionQueryCount++,(!0===t.transparent?this.transparent:this.opaque).push(d)}unshift(r,e,t,s,n,i){const d=this.getNextRenderItem(r,e,t,s,n,i);(!0===t.transparent?this.transparent:this.opaque).unshift(d)}pushLight(r){this.lightsArray.push(r)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(r,e){this.opaque.length>1&&this.opaque.sort(r||painterSortStable),this.transparent.length>1&&this.transparent.sort(e||reversePainterSortStable)}finish(){this.lightsNode.fromLights(this.lightsArray);for(let r=this.renderItemsIndex,e=this.renderItems.length;r<e;r++){const e=this.renderItems[r];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.groupOrder=null,e.renderOrder=null,e.z=null,e.group=null}}}export default RenderList;
//# sourceMappingURL=/sm/579337543af36f2ecfa0c33b86d44b4bc4132e8bb3c31e1fde55491b9dab241a.map