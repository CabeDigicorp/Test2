/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/three@0.170.0/examples/jsm/csm/CSMFrustum.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Vector3,Matrix4}from"three";const inverseProjectionMatrix=new Matrix4;class CSMFrustum{constructor(e){e=e||{},this.zNear=!0===e.webGL?-1:0,this.vertices={near:[new Vector3,new Vector3,new Vector3,new Vector3],far:[new Vector3,new Vector3,new Vector3,new Vector3]},void 0!==e.projectionMatrix&&this.setFromProjectionMatrix(e.projectionMatrix,e.maxFar||1e4)}setFromProjectionMatrix(e,t){const r=this.zNear,i=0===e.elements[11];return inverseProjectionMatrix.copy(e).invert(),this.vertices.near[0].set(1,1,r),this.vertices.near[1].set(1,-1,r),this.vertices.near[2].set(-1,-1,r),this.vertices.near[3].set(-1,1,r),this.vertices.near.forEach((function(e){e.applyMatrix4(inverseProjectionMatrix)})),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach((function(e){e.applyMatrix4(inverseProjectionMatrix);const r=Math.abs(e.z);i?e.z*=Math.min(t/r,1):e.multiplyScalar(Math.min(t/r,1))})),this.vertices}split(e,t){for(;e.length>t.length;)t.push(new CSMFrustum);t.length=e.length;for(let r=0;r<e.length;r++){const i=t[r];if(0===r)for(let e=0;e<4;e++)i.vertices.near[e].copy(this.vertices.near[e]);else for(let t=0;t<4;t++)i.vertices.near[t].lerpVectors(this.vertices.near[t],this.vertices.far[t],e[r-1]);if(r===e.length-1)for(let e=0;e<4;e++)i.vertices.far[e].copy(this.vertices.far[e]);else for(let t=0;t<4;t++)i.vertices.far[t].lerpVectors(this.vertices.near[t],this.vertices.far[t],e[r])}}toSpace(e,t){for(let r=0;r<4;r++)t.vertices.near[r].copy(this.vertices.near[r]).applyMatrix4(e),t.vertices.far[r].copy(this.vertices.far[r]).applyMatrix4(e)}}export{CSMFrustum};
//# sourceMappingURL=/sm/63008d4d75fa085b94260e6d1d74d86beac8139f1f5c7a9aff20c09db138abaf.map